---
title: "Exploring SWATplusR"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Exploring SWATplusR}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
bibliography: literature.bib
link-citations: yes
linkcolor: blue
csl: copernicus.csl
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Loading R packages

Before exploring the package load `SWATplusR`:
```{r}
library(SWATplusR)
```


## Loading demos

### SWAT projects

`SWATplusR` provides very simple model setups of a head watershed of the Little River Experimental Watershed [LREW; @Bosch2007]. Demo model setups can be retrieved for SWAT2012 and for SWAT+. Currently a SWAT2012 demo is available for Windows and Linux, while for SWAT+ only a setup for Windows is currently available. A demo project can be loaded with the following command.

```{r, eval=FALSE}
# The path where the SWAT demo project will be written
demo_path <- "Define:/your/path"

# Loading a SWAT+ demo project
path_plus <- load_demo(dataset = "project",
                       swat_version = "plus",
                       path = demo_path)

# Loading a SWAT2012 demo project
path_2012 <- load_demo(dataset = "project",
                       swat_version = "2012",
                       path = demo_path)
```

Here `load_demo()` loads a demo project data set and saves it in the defined `demo_path`. Additionally, the function returns the final demo project path (`path_plus` and `path_2012`) as a character string back to R. This path is directly usable to run the SWAT model in that path.

### Observation data
`SWATplusR` also provides observation data of daily discharge records at the main outlet of the demo for the time period 1968-01-01 until 2012-12-31. The data set is useful for the model evaluation of a demo project. You can load the observation data as follows:

```{r}
q_obs <- load_demo(dataset = "observation")

q_obs
```

A quick plot of the observation data set:
```{r}
plot(q_obs, type = "l")
```

### Spatial data
To visualize simulation results spatially, shape files of the subbasins, river network, and HRUs for the SWAT+ and the SWAT2012 demo setups are available from `SWATplusR`. For spatial data `load_demo()` only returns the paths to the shape files. As the spatial data for the two SWAT project setups looks different loading the data requires the definition of the `swat_version`.

```{r}
# Path to the subbasin shape file
sub_path <- load_demo(dataset = "subbasin", swat_version = "plus")
# Path to the subbasin shape file
riv_path <- load_demo(dataset = "river", swat_version = "plus")

sub_path
```

These paths you can use to load the spatial data with your preferred method. The package `sf` [@Pebesma2018a; @Pebesma2018b] provides a very elegant way to work with spatial vector objects in R that have a direct intergration for plotting in `ggplot2` [@Wickham2016].

```{r}
# Loading the sf and ggplot2 packages for the visualization
library(sf)
library(ggplot2)

# Loading the spatial data as simple features
sub <- read_sf(sub_path)
riv <- read_sf(riv_path)

ggplot() + 
  geom_sf(data = sub) + 
  geom_sf(data = riv, col = "royalblue", lwd = 0.75) + 
  theme_bw()

```

## Definition of SWAT outputs



## References
